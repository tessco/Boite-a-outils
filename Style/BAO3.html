<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<link href="../Style/style.css" rel="stylesheet" type="text/css">
	<link rel="icon" type="image/ico" href="../Images/bao.ico">
	<title>BAO 3</title>
</head>

<body>
<img src="../Images/titlebar3.png" id="navigateur" alt="menu">
<img src="../Images/titlebar4.png" id="navigateur2" alt="menu2">
<a href="BAO1.html"><div id=button1><img src="../Images/b1.png" id="pic1" alt="1"></div></a>
<a href="BAO2.html"><div id=button2><img src="../Images/b2.png" id="pic2" alt="2"></div></a>
<a href="BAO3.html"><div id=button3><img src="../Images/b3.png" id="pic3" alt="3"></div></a>
<a href="BAO4.html"><div id=button4><img src="../Images/b4.png" id="pic4" alt="4"></div></a>
<a href="index.html"><div id=button5><img src="../Images/b5.png" id="pic5" alt="5"></div></a>

<a href="index.html"><div id=buttonhome></div></a>

<div id="innerpage">

	<a id="top_of_page"><h1>Boîte à Outils 3</h1></a>
	<br><br>
<h2>Une représentation des sorties XML de BAO 3:</h2>
<img src="../Images/economie2.jpeg" id="arborescence_corpus" alt="Arborescence">

<br><br> 
<p>Pour obtenir le résultat ci-dessus, il faut extraire les patrons "NOM ADJ" et "NOM PREP NOM" des sorties XML de BAO 2 par le programme puis les transforme par XSLT en format HTML.</p>

<h2>Présentation de BAO 3</h2>
<p>Cette étape de BAO 3 est l'extraction de patrons syntaxiques des fichiers obtenus à la BAO2. Il s'agit de repérer les suites “NOM ADJ” et “NOM PREP NOM”. On dispose de plusieurs méthodes:</p>
<P>Traitement des sorties TXT Cordial: 2 méthodes Perl utilisant des listes patrons</p>
<p>Traitement des sorties XML: le module XML::LibXML de Perl </p>
	
<h3>Méthode proposée par Jean-Michel Daube</h3>
<p>Cette méthode consiste à lire le fichier étiqueté par Cordial jusqu'à trouver une ponctuation forte. Le programme lit le fichier ligne par ligne (forme, lemme et catégorie syntaxique). En utilisant l'étiquette "PCTFORTE" comme indicateur à la fin d'une phrase. Il traite phrase par phrase, en stockant dans trois tableaux différents (@tokens, @lemmes et @catégories) les informations pour chaque mot de la phrase. Quand on rencontre une "PCTFORTE", on effectue le traitement sur les trois listes, et ensuite on les reinitialise pour traiter la phrase suivante.</p>
<p>En prenant des motifs "NOM ADJ" et "NOM PREP NOM", les formes dans les listes patrons sont:</p>
<p>NC[A-Z]+ ADJ[A-Z]+</p>
<p>NC[A-Z]+ PREP NC[A-Z]+</p>
<p>Le script se trouve ci-dessous:</p>
	
<div class="keep_format"><div style="padding:5px 5px 10px"><div style="height:16px"><span style="color:#008e00">#!/usr/bin/perl</span></div><div style="height:16px"><span style="color:#008e00">#Le&nbsp;programme&nbsp;du&nbsp;JMD...</span></div><div style="height:16px"><span style="color:#008e00">#lecture&nbsp;du&nbsp;fichier&nbsp;cordial&nbsp;et&nbsp;d'un&nbsp;fichier&nbsp;de&nbsp;patrons</span></div><div style="height:16px"><span style="color:#008e00">#important:&nbsp;tout&nbsp;est&nbsp;en&nbsp;iso</span></div><div style="height:16px"><span style="color:#008e00">#1è&nbsp;argument:&nbsp;le&nbsp;fichier&nbsp;des&nbsp;patrons&nbsp;morphsyntaxique</span></div><div style="height:16px"><span style="color:#450084">open</span>(<span>TERMINO</span><span style="color:#c800a4">,</span>&nbsp;<span style="color:#df0002">"&lt;$ARGV[0]"</span>);</div><div style="height:16px"><span style="color:#c800a4">while</span>&nbsp;(<span style="color:#c800a4">my</span>&nbsp;<span>$terme</span><span style="color:#c800a4">=&lt;</span><span>TERMINO</span><span style="color:#c800a4">&gt;</span>)&nbsp;{</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#450084">chomp</span>(<span>$terme</span>);</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span>$terme</span><span style="color:#c800a4">=~</span><span>s</span><span style="color:#c800a4">/</span>&nbsp;<span style="color:#c800a4">+</span><span style="color:#df0002">/&nbsp;/g</span>;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span>$terme</span><span style="color:#c800a4">=~</span><span>s</span><span style="color:#c800a4">/\</span><span>r</span><span style="color:#df0002">//g</span>;&nbsp;<span style="color:#008e00">#troisimè&nbsp;colonne&nbsp;de&nbsp;fichier&nbsp;cordial</span></div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#450084">open</span>(<span>CORDIAL</span><span style="color:#c800a4">,</span>&nbsp;<span style="color:#df0002">"&lt;$ARGV[1]"</span>);</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">while</span>&nbsp;(<span>$ligne</span><span style="color:#c800a4">=&lt;</span><span>CORDIAL</span><span style="color:#c800a4">&gt;</span>)&nbsp;{</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#450084">chomp</span>&nbsp;(<span>$ligne</span>);</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span>$ligne</span><span style="color:#c800a4">=~</span><span>s</span><span style="color:#c800a4">/\</span><span>r</span><span style="color:#df0002">//g</span>;</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">if</span>&nbsp;(<span>$ligne</span><span style="color:#c800a4">!~</span><span style="color:#df0002">/PCT/</span>){</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">my</span>&nbsp;@<span>LISTE</span><span style="color:#c800a4">=</span><span style="color:#450084">split</span>(<span style="color:#df0002">/\t/</span><span style="color:#c800a4">,</span><span>$ligne</span>);</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008e00">#print&nbsp;"PATRON&nbsp;LU&nbsp;$terme:&nbsp;Lingne&nbsp;lue&nbsp;&lt;@LISTE&gt;\n";</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#450084">push</span>(@<span>POS</span><span style="color:#c800a4">,</span><span>$LISTE</span>[<span style="color:#3a00dc">2</span>]);</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#450084">push</span>(@<span>TOKEN</span><span style="color:#c800a4">,</span><span>$LISTE</span>[<span style="color:#3a00dc">0</span>]);</div><div style="height:16px"></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">else</span>&nbsp;{</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008e00">#on&nbsp;est&nbsp;arrivé&nbsp;sur&nbsp;un&nbsp;PCT,&nbsp;on&nbsp;va&nbsp;la&nbsp;traiter..</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008e00">#print&nbsp;"&lt;@TOKEN&gt;\n";</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008e00">#print&nbsp;"&lt;@POS&gt;\n";</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008e00">#print&nbsp;"TERME&nbsp;CHERCHE:&nbsp;$terme&nbsp;\n";</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008e00">#my&nbsp;$a=&lt;STDIN&gt;;</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008e00">#on&nbsp;doit&nbsp;chercher&nbsp;si&nbsp;le&nbsp;"scalaire"&nbsp;$terme&nbsp;qui&nbsp;est&nbsp;dans&nbsp;@POS</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008e00">#pour&nbsp;cela&nbsp;on&nbsp;va&nbsp;transformer&nbsp;$terme&nbsp;sous&nbsp;la&nbsp;forme&nbsp;d'une&nbsp;liste</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008e00">#pour&nbsp;ensuite&nbsp;faire&nbsp;le&nbsp;match&nbsp;entre&nbsp;la&nbsp;liste&nbsp;TERME&nbsp;et&nbsp;la&nbsp;scalaire&nbsp;POS</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008e00">#si&nbsp;"match"&nbsp;on&nbsp;va&nbsp;imprimer...</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">my</span>&nbsp;<span>$pos</span><span style="color:#c800a4">=</span><span style="color:#450084">join</span>(<span style="color:#df0002">"&nbsp;"</span><span style="color:#c800a4">,</span>@<span>POS</span>);</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">my</span>&nbsp;<span>$token</span><span style="color:#c800a4">=</span><span style="color:#450084">join</span>(<span style="color:#df0002">"&nbsp;"</span><span style="color:#c800a4">,</span>@<span>TOKEN</span>);</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">my</span>&nbsp;<span>$cmptdetrouvage</span><span style="color:#c800a4">=</span><span style="color:#3a00dc">0</span>;</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">while</span>&nbsp;(<span>$pos</span><span style="color:#c800a4">=~</span><span style="color:#df0002">/$terme/g</span>){</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span>$cmptdetrouvage</span><span style="color:#c800a4">++</span>;</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008e00">#print&nbsp;"Youpi,&nbsp;TROUVE&nbsp;$cmptdetrouvage&nbsp;fois&nbsp;\n&nbsp;";</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008e00">#print&nbsp;"&nbsp;En&nbsp;effet:&nbsp;$terme&nbsp;est&nbsp;bien&nbsp;dans&nbsp;$pos!!!&nbsp;\n";</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">my</span>&nbsp;<span>$avantlacorrespondance</span><span style="color:#c800a4">=</span>$`;<span style="color:#008e00">#&nbsp;pb&nbsp;pb&nbsp;pb&nbsp;</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008e00">#on&nbsp;compte&nbsp;le&nbsp;nb&nbsp;de&nbsp;blanc&nbsp;dans&nbsp;avant..</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008e00">#super&nbsp;methode:&nbsp;my&nbsp;$comptagedebalanc=()&nbsp;=$avantlacorrespondance=~/&nbsp;/g;</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">my</span>&nbsp;<span>$comptagedebalancdansterme</span><span style="color:#c800a4">=</span><span style="color:#3a00dc">0</span>;</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">while</span>&nbsp;(<span>$terme</span><span style="color:#c800a4">=~</span><span style="color:#df0002">/&nbsp;/g</span>){</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span>$comptagedebalancdansterme</span><span style="color:#c800a4">++</span>;</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">my</span>&nbsp;<span>$comptagedebalanc</span><span style="color:#c800a4">=</span><span style="color:#3a00dc">0</span>;</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008e00">#print&nbsp;"&nbsp;AVANT&nbsp;:&nbsp;$avantlacorrespondance&nbsp;\n";</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">while</span>&nbsp;(<span>$avantlacorrespondance</span><span style="color:#c800a4">=~</span><span style="color:#df0002">/&nbsp;/g</span>)&nbsp;{</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span>$comptagedebalanc</span><span style="color:#c800a4">++</span>;&nbsp;&nbsp;&nbsp;&nbsp;</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">for</span>&nbsp;(<span style="color:#c800a4">my</span>&nbsp;<span>$i</span><span style="color:#c800a4">=</span><span>$comptagedebalanc</span>;&nbsp;<span>$i</span><span style="color:#c800a4">&lt;=</span><span>$comptagedebalanc</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">+</span><span>$comptagedebalancdansterme</span>;&nbsp;<span>$i</span><span style="color:#c800a4">++</span>)&nbsp;{</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#450084">print</span>&nbsp;<span>$TOKEN</span>&nbsp;[<span>$i</span>]<span style="color:#c800a4">.</span><span style="color:#df0002">"&nbsp;"</span>;</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#450084">print</span>&nbsp;<span style="color:#df0002">"\n"</span>;</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008e00">#ceci&nbsp;fini&nbsp;pour&nbsp;la&nbsp;recherche&nbsp;du&nbsp;match</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008e00">#&nbsp;on&nbsp;vide&nbsp;les&nbsp;2&nbsp;listes&nbsp;de&nbsp;travail&nbsp;avant&nbsp;de&nbsp;recommencer&nbsp;de&nbsp;les&nbsp;remplir</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;@<span>POS</span><span style="color:#c800a4">=</span>();</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;@<span>TOKEN</span><span style="color:#c800a4">=</span>();</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008e00">#&nbsp;body...</span></div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#450084">close</span>(<span>CORDIAL</span>);&nbsp;&nbsp;&nbsp;</div><div style="height:16px">}</div><div style="height:16px"><span style="color:#450084">close</span>(<span>TERMINO</span>);</div><div style="height:16px"></div></div>&nbsp;<br/></div>                                                
<br><br>
<div class="lien_centre"><a href="#top_of_page">[ TOP ]</a></div><br>
<h3>Méthode proposée par Serge Fleury</h3> 
<p>Ce programme parcourt la liste des catégorie et des tokens en parallèle. Si une catégorie correspond au premier catégorie d'un patron, alors il vérifie s’il y a les catégories suivantes correspondant à la suite du patron. Si c'est le cas, il extrait les tokens correspondant aux catégories repérées. Ce programme est aussi le principe de fonctionnement du Trameur.</p>                                     
<p>Bis: Alors, on a manipulé un motif de recherche croisée de patrons NOM ADJ (forme 1) dans la section PATRON de Trameur avec la sortie rubrique POLITIQUE. Il extrait tous les séquences de NOM ADJ. On a fait un graphe avec un motif "\bélections\b" pour visualiser le résultat:</p>
<br>
<img src="../Images/trameur.jpg" id="arborescence_corpus" alt="Arborescence">
<p>Les patrons dans la liste sont en forme ci-dessous:</p>
<p>NC[A-Z]+ ADJ[A-Z]+</p>
<p>NC[A-Z]+ PREP NC[A-Z]+</p>	
<p>Le script complet pour extraire "NOM ADJ" est comme suit:</p>
<div class="keep_format"><div style="padding:5px 5px 10px"><div style="height:16px"><span style="color:#008e00">#/usr/bin/perl</span></div><div style="height:16px"><span style="color:#450084">open</span>(<span>FILE</span><span style="color:#c800a4">,</span><span style="color:#df0002">"$ARGV[0]"</span>);</div><div style="height:16px"><span style="color:#008e00">#--------------------------------------------</span></div><div style="height:16px"><span style="color:#008e00">#&nbsp;le&nbsp;patron&nbsp;cherché&nbsp;ici&nbsp;est&nbsp;du&nbsp;type&nbsp;NOM&nbsp;ADJ";</span></div><div style="height:16px"><span style="color:#008e00">#--------------------------------------------</span></div><div style="height:16px"><span style="color:#c800a4">my</span>&nbsp;@<span>lignes</span><span style="color:#c800a4">=&lt;</span><span>FILE</span><span style="color:#c800a4">&gt;</span>;</div><div style="height:16px"><span style="color:#450084">close</span>(<span>FILE</span>);</div><div style="height:16px"><span style="color:#c800a4">while</span>&nbsp;(@<span>lignes</span>)&nbsp;{</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">my</span>&nbsp;<span>$ligne</span><span style="color:#c800a4">=</span><span style="color:#450084">shift</span>(@<span>lignes</span>);</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008e00">#on&nbsp;lit&nbsp;une&nbsp;premiere&nbsp;ligne&nbsp;et&nbsp;on&nbsp;le&nbsp;vire&nbsp;dans&nbsp;la&nbsp;liste</span></div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#450084">chomp</span>&nbsp;<span>$ligne</span>;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">my</span>&nbsp;<span>$sequence</span><span style="color:#c800a4">=</span><span style="color:#df0002">""</span>;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">my</span>&nbsp;<span>$longueur</span><span style="color:#c800a4">=</span><span style="color:#3a00dc">0</span>;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">if</span>&nbsp;(&nbsp;<span>$ligne</span>&nbsp;<span style="color:#c800a4">=~</span>&nbsp;<span style="color:#df0002">/^([^\t]+)\t[^\t]+\tNC.*/</span>)&nbsp;{</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008e00">#on&nbsp;prend&nbsp;le&nbsp;premier&nbsp;element&nbsp;de&nbsp;la&nbsp;ligne&nbsp;qui&nbsp;contient&nbsp;un&nbsp;nom</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;<span style="color:#c800a4">my</span>&nbsp;<span>$forme</span><span style="color:#c800a4">=</span><span>$1</span>;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>$sequence</span><span style="color:#c800a4">.=</span><span>$forme</span>;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>$longueur</span><span style="color:#c800a4">=</span><span style="color:#3a00dc">1</span>;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">my</span>&nbsp;<span>$nextligne</span><span style="color:#c800a4">=</span><span>$lignes</span>[<span style="color:#3a00dc">0</span>];</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">if</span>&nbsp;(&nbsp;<span>$nextligne</span>&nbsp;<span style="color:#c800a4">=~</span>&nbsp;<span style="color:#df0002">/^([^\t]+)\t[^\t]+\tADJ.*/</span>)&nbsp;{</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">my</span>&nbsp;<span>$forme</span><span style="color:#c800a4">=</span><span>$1</span>;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>$sequence</span><span style="color:#c800a4">.=</span><span style="color:#df0002">"&nbsp;"</span><span style="color:#c800a4">.</span><span>$forme</span>;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>$longueur</span><span style="color:#c800a4">=</span><span style="color:#3a00dc">2</span>;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">if</span>&nbsp;(<span>$longueur</span>&nbsp;<span style="color:#c800a4">==</span>&nbsp;<span style="color:#3a00dc">2</span>)&nbsp;{</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#450084">print</span>&nbsp;<span>$sequence</span><span style="color:#c800a4">,</span><span style="color:#df0002">"\n"</span>;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height:16px">}</div></div><div>&nbsp;</div></div>
<p>Le script complet pour extraire "NOM PREP NOM" est comme suit:</p>	
<div class="keep_format"><div><div style="padding:5px 5px 10px"><div style="height:16px"><span style="color:#008e00">#/usr/bin/perl</span></div><div style="height:16px"><span style="color:#450084">open</span>(<span>FILE</span><span style="color:#c800a4">,</span><span style="color:#df0002">"$ARGV[0]"</span>);</div><div style="height:16px"><span style="color:#008e00">#--------------------------------------------------</span></div><div style="height:16px"><span style="color:#008e00">#&nbsp;le&nbsp;patron&nbsp;cherché&nbsp;ici&nbsp;est&nbsp;du&nbsp;type&nbsp;"NOM&nbsp;PREP&nbsp;NOM";</span></div><div style="height:16px"><span style="color:#008e00">#--------------------------------------------------</span></div><div style="height:16px"><span style="color:#c800a4">my</span>&nbsp;@<span>lignes</span><span style="color:#c800a4">=&lt;</span><span>FILE</span><span style="color:#c800a4">&gt;</span>;</div><div style="height:16px"><span style="color:#450084">close</span>(<span>FILE</span>);</div><div style="height:16px"><span style="color:#c800a4">while</span>&nbsp;(@<span>lignes</span>)&nbsp;{</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">my</span>&nbsp;<span>$ligne</span><span style="color:#c800a4">=</span><span style="color:#450084">shift</span>(@<span>lignes</span>);</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#450084">chomp</span>&nbsp;<span>$ligne</span>;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">my</span>&nbsp;<span>$sequence</span><span style="color:#c800a4">=</span><span style="color:#df0002">""</span>;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">my</span>&nbsp;<span>$longueur</span><span style="color:#c800a4">=</span><span style="color:#3a00dc">0</span>;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">if</span>&nbsp;(&nbsp;<span>$ligne</span>&nbsp;<span style="color:#c800a4">=~</span>&nbsp;<span style="color:#df0002">/^([^\t]+)\t[^\t]+\tNC.*/</span>)&nbsp;{</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;<span style="color:#c800a4">my</span>&nbsp;<span>$forme</span><span style="color:#c800a4">=</span><span>$1</span>;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>$sequence</span><span style="color:#c800a4">.=</span><span>$forme</span>;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>$longueur</span><span style="color:#c800a4">=</span><span style="color:#3a00dc">1</span>;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">my</span>&nbsp;<span>$nextligne</span><span style="color:#c800a4">=</span><span>$lignes</span>[<span style="color:#3a00dc">0</span>];</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">if</span>&nbsp;(&nbsp;<span>$nextligne</span>&nbsp;<span style="color:#c800a4">=~</span>&nbsp;<span style="color:#df0002">/^([^\t]+)\t[^\t]+\tPREP.*/</span>)&nbsp;{</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">my</span>&nbsp;<span>$forme</span><span style="color:#c800a4">=</span><span>$1</span>;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>$sequence</span><span style="color:#c800a4">.=</span><span style="color:#df0002">"&nbsp;"</span><span style="color:#c800a4">.</span><span>$forme</span>;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>$longueur</span><span style="color:#c800a4">=</span><span style="color:#3a00dc">2</span>;</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;<span style="color:#c800a4">my</span>&nbsp;<span>$nextnextlinge</span><span style="color:#c800a4">=</span><span>$linges</span>[<span style="color:#3a00dc">1</span>];</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;<span style="color:#c800a4">if</span>&nbsp;(<span>$nextnextlinge</span><span style="color:#c800a4">=~</span>&nbsp;<span style="color:#df0002">/^([^\t]+)\t[^\t]+\tNC.*/</span>)&nbsp;{</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;<span style="color:#c800a4">my</span>&nbsp;<span>$forme</span><span style="color:#c800a4">=</span><span>$1</span>;</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;<span>$sequence</span><span style="color:#c800a4">.=</span><span style="color:#df0002">"&nbsp;"</span><span style="color:#c800a4">.</span><span>$forme</span>;</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;<span>$longueur</span><span style="color:#c800a4">=</span><span style="color:#3a00dc">3</span>;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;}</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">if</span>&nbsp;(<span>$longueur</span>&nbsp;<span style="color:#c800a4">==</span>&nbsp;<span style="color:#3a00dc">3</span>)&nbsp;{</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#450084">print</span>&nbsp;<span>$sequence</span><span style="color:#c800a4">,</span>&nbsp;<span style="color:#df0002">"\n"</span>;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height:16px">}</div></div><br/></div></div>
<br><br>
<div class="lien_centre"><a href="#top_of_page">[ TOP ]</a></div><br>	
<h2>Méthode d'automation</h2>
<p>Comme les deux méthodes ci-dessus ne prennent en entrée qu'un seul fichier à la fois, on peut utiliser "subprocess" de Python à gérer:
<div class="keep_format">subprocess.call(["/path/to/script.pl", argument1, argument2])</div>
<br>
<p>Selon la même technique utilisée pour le parcours d'arborescence écrit en Perl (BAO 1, BAO 2), on peut aussi d'automatiser cette tâche, ça commence à peu près:</p>
<div class="keep_format"><div style="height:16px"><span style="color:#c800a4">my</span>&nbsp;<span>$patrons</span><span style="color:#c800a4">=</span><span style="color:#df0002">"Extract_patron/"</span>;</div><div style="height:16px"><span style="color:#008e00">#&nbsp;Création&nbsp;d'un&nbsp;dossier&nbsp;de&nbsp;sorties&nbsp;pour&nbsp;les&nbsp;patrons&nbsp;</span></div><div style="height:16px"><span style="color:#c800a4">if</span>&nbsp;(<span style="color:#c800a4">!</span>&nbsp;<span style="color:#c800a4">-</span><span>e</span>&nbsp;<span>$patrons</span>){&nbsp;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#450084">mkdir</span>(<span>$patrons</span>)&nbsp;<span>or</span>&nbsp;<span style="color:#450084">die</span>&nbsp;(<span style="color:#df0002">"Pb&nbsp;à&nbsp;la&nbsp;création&nbsp;du&nbsp;répertoire&nbsp;:&nbsp;$!"</span>);&nbsp;</div><div style="height:16px">}</div><div style="height:16px"></div></div>
<p>Créer le chemin d'entrée, récupérer le variable, puis transferer les fichiers lus dans un tableau:</P>
<div class="keep_format"><div style="height:16px"><span style="color:#c800a4">my</span>&nbsp;<span>$path</span><span style="color:#c800a4">=</span><span style="color:#df0002">"$ARGV[0]"</span>;</div><div style="height:16px"><span>$path</span><span style="color:#c800a4">=~</span><span>s</span><span style="color:#c800a4">/</span>[<span style="color:#c800a4">\/</span>]$<span style="color:#df0002">//</span>;</div><div style="height:16px"><span style="color:#c800a4">my</span>&nbsp;<span>$patron</span><span style="color:#c800a4">=</span><span style="color:#df0002">"$ARGV[1]"</span>;</div><div style="height:16px"><span style="color:#450084">opendir</span>(<span>DIR</span><span style="color:#c800a4">,</span>&nbsp;<span>$path</span>)&nbsp;<span>or</span>&nbsp;<span style="color:#450084">die</span>&nbsp;<span style="color:#df0002">"on ne peut pas ouvrir&nbsp;&nbsp;$path:&nbsp;$!\n"</span>;</div><div style="height:16px"><span style="color:#c800a4">my</span>&nbsp;@<span>files</span><span style="color:#c800a4">=</span><span style="color:#450084">readdir</span>(<span>DIR</span>);</div><div style="height:16px"><span style="color:#450084">closedir</span>(<span>DIR</span>);</div><div style="height:16px"></div></div>
<p>Création d'un fichier de sortie pour tous les fichiers, suppression de ".cnr" des noms de fichiers de sorties, exécution du programme:</p>
<div class="keep_format"><div style="height:16px"><span style="color:#c800a4">foreach</span>&nbsp;<span style="color:#c800a4">my</span>&nbsp;<span>$file</span>&nbsp;(@<span>files</span>){</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">next</span>&nbsp;<span style="color:#c800a4">if</span>&nbsp;<span>$file</span><span style="color:#c800a4">=~</span><span style="color:#df0002">/^\.\.?$/</span>;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">my</span>&nbsp;<span>$txt</span><span style="color:#c800a4">=</span><span style="color:#df0002">"$patrons"</span><span style="color:#c800a4">.</span><span>$file</span><span style="color:#c800a4">.</span><span style="color:#df0002">'-'</span><span style="color:#c800a4">.</span><span>$patron</span>;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span>$txt</span><span style="color:#c800a4">=~</span><span>s</span><span style="color:#c800a4">/\.</span><span>cnr</span><span style="color:#df0002">//</span>;&nbsp;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span>$file</span><span style="color:#c800a4">=</span><span>$path</span><span style="color:#c800a4">.</span><span style="color:#df0002">"/"</span><span style="color:#c800a4">.</span><span>$file</span>;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#450084">system</span>(<span style="color:#df0002">"perl&nbsp;JMD.pl(ou&nbsp;SF)&nbsp;$file&nbsp;$patron&nbsp;&gt;&nbsp;$txt"</span>);</div><div style="height:16px">}<span>&nbsp;</span></div></div>
<br>
<h3>Problème soulevé</h3>
<p>Concernant l’extraction des patrons, vu que des fois les fichiers finaux sont trop gros pour executer le script fournis par le professeur, celui de monsieur Rachid Belmouhoub par exemple, on a fait appel à un script bash pour les couper en plusieurs fichiers plus petits si bien que le script peut être exécuter sans difficulté, le code comme suit:</p>
<div class="keep_format"><div style="height:16px">#<span style="color:#c800a4">!</span>/<span>bin</span>/<span>bash</span></div><div style="height:16px"><span>linenum</span><span style="color:#c800a4">=</span>`<span>wc</span>&nbsp;<span style="color:#3a00dc">-1</span>&nbsp;<span>httperr8007</span><span>.</span><span style="color:#450084">log</span>&nbsp;|&nbsp;<span style="color:#df0002">'{print&nbsp;$1}'</span>`</div><div style="height:16px"><span>n1</span><span style="color:#c800a4">=</span><span style="color:#3a00dc">1</span></div><div style="height:16px"><span>file</span><span style="color:#c800a4">=</span><span style="color:#3a00dc">1</span></div><div style="height:16px"><span style="color:#c800a4">while</span>&nbsp;<span>[</span>&nbsp;<span>$n1</span>&nbsp;<span style="color:#c800a4">-</span>1<span>t</span>&nbsp;<span>$linenum</span>&nbsp;<span>]</span></div><div style="height:16px"><span style="color:#c800a4">do</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span>n2</span><span style="color:#c800a4">=</span>`<span style="color:#450084">exp</span><span>r</span>&nbsp;<span>$n1</span>&nbsp;<span style="color:#c800a4">+</span>&nbsp;<span style="color:#3a00dc">999</span>`</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span>sed</span>&nbsp;<span style="color:#c800a4">-</span><span>n</span>&nbsp;<span style="color:#df0002">"${n2}p"</span>&nbsp;<span>input</span><span>.</span><span>txt</span>&nbsp;<span style="color:#c800a4">&gt;</span>&nbsp;<span>output</span><span>.</span><span>txt</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span>n1</span><span style="color:#c800a4">=</span>'<span style="color:#450084">exp</span><span>r</span>&nbsp;<span>$n2</span>&nbsp;<span style="color:#c800a4">+</span>&nbsp;<span style="color:#3a00dc">1</span>`</div><div style="height:16px"><span>done</span></div></div>
<br>
<div class="lien_centre"><a href="#top_of_page">[ TOP ]</a></div><br>	

	<h3>Méthode proposée par R. Belmouhoub</h3>
	
<p>XPATH exprime des chemins via la barre oblique et on peut aussi contenir des prédicats pour imposer des conditions aux noeuds sélectionnés. Cette méthode consiste à intégrer des requêtes XPath dans un programme Perl, via le module XML::XPath.</p>
<p>Lecture du fichier de patrons (correspondant à un motif chaque fois). Pour chaque ligne du fichier, un appel à la procédure &extract_pattern, avec le motif comme argument. La procédure &extract_pattern prend le motif actuel et produit une sortie pour ce motif. La construction du chemin se fait via la procédure &construit_XPath qui prend comme argument la ligne du patron, qu'elle transforme en liste pour pouvoir la parcourir. On a dit que ce programme n'exécute pas bien avec des fichiers gros, mais sous Mac OS, on en a utilisé à traiter "ALAUNE" (rubrique ayant le plus de contenu) qui extrait très rapidement. </p>
<p></p>
<div class="keep_format"><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008e00">#&nbsp;Initialisation&nbsp;du&nbsp;compteur&nbsp;pour&nbsp;la&nbsp;boucle&nbsp;de&nbsp;construction&nbsp;du&nbsp;chemin&nbsp;XPath</span></div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">my</span>&nbsp;<span>$i</span><span style="color:#c800a4">=</span><span style="color:#3a00dc">1</span>;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">while</span>&nbsp;(<span>$i</span>&nbsp;<span style="color:#c800a4">&lt;</span>&nbsp;$<span style="color:#008e00">#tokens)&nbsp;{</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span>$search_path</span><span style="color:#c800a4">.=</span>"[<span>following</span><span style="color:#c800a4">-</span><span>sibling</span>::<span>element</span>[<span style="color:#3a00dc">1</span>][<span>contains</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;(<span>data</span>[<span style="color:#c800a4">\</span>@<span>type</span><span style="color:#c800a4">=\</span><span style="color:#df0002">"type\"],\"$tokens[$i]\")]"</span>;</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span>$i</span><span style="color:#c800a4">++</span>;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">my</span>&nbsp;<span>$search_path_suffix</span><span style="color:#c800a4">=</span><span style="color:#df0002">"]"</span>;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008e00">#&nbsp;on&nbsp;utilise&nbsp;l'opérateur&nbsp;x&nbsp;qui&nbsp;permet&nbsp;de&nbsp;répéter&nbsp;la&nbsp;chaine&nbsp;de&nbsp;caractère&nbsp;à</span></div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>sa</span>&nbsp;<span>gauche</span>&nbsp;<span>autant</span>&nbsp;<span>de</span>&nbsp;<span>fois</span>&nbsp;<span>que</span>&nbsp;<span>l</span>'<span>entier</span>&nbsp;<span>de</span>&nbsp;<span>sa</span>&nbsp;<span>droite</span><span style="color:#c800a4">,</span></div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008e00">#&nbsp;soit&nbsp;$i&nbsp;fois&nbsp;$search_path_suffix</span></div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span>$search_path_suffix</span><span style="color:#c800a4">=</span><span>$search_path_suffix</span>&nbsp;<span>x</span>&nbsp;<span>$i</span>;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008e00">#&nbsp;le&nbsp;chemin&nbsp;XPath&nbsp;final</span></div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span>$search_path</span><span style="color:#c800a4">.=</span>"[<span>following</span><span style="color:#c800a4">-</span><span>sibling</span>::<span>element</span>[<span style="color:#3a00dc">1</span>][<span>contains</span>(<span>data</span>[<span style="color:#c800a4">\</span>@<span>type</span><span style="color:#c800a4">=\</span>"<span>type</span><span style="color:#c800a4">\</span>"]<span style="color:#c800a4">,</span></div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">\</span><span style="color:#df0002">""</span><span style="color:#c800a4">.</span><span>$tokens</span>[$<span style="color:#008e00">#tokens]."\")]"</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">.</span><span>$search_path_suffix</span>;</div></div>  
<br>		
<p>Ce chemin est récupéré par la procédure &extract_pattern. L'exploration de l'arborescence XML a besoin de la création d'un nouvel objet XML::XPATH et il est possible de récupérer les noeuds qui correspondent au chemin créé en faisant une requête sur cet objet via “findnoedes”.</p>
			<div class="keep_format"><div style="height:16px"><span style="color:#c800a4">foreach</span>&nbsp;<span style="color:#c800a4">my</span>&nbsp;<span>$noeud</span>&nbsp;(&nbsp;@<span>nodes</span>)&nbsp;{&nbsp;<span style="color:#008e00">#noeud&nbsp;est&nbsp;"element"</span></div><div style="height:16px"><span style="color:#008e00">#&nbsp;Initialisation&nbsp;du&nbsp;chemin&nbsp;XPath&nbsp;relatif&nbsp;du&nbsp;noeud&nbsp;"data"&nbsp;contenant</span></div><div style="height:16px"><span style="color:#008e00">#&nbsp;la&nbsp;forme&nbsp;correspondant&nbsp;au&nbsp;premier&nbsp;élément&nbsp;du&nbsp;motif</span></div><div style="height:16px"><span style="color:#008e00">#&nbsp;Ce&nbsp;chemin&nbsp;est&nbsp;relatif&nbsp;au&nbsp;premier&nbsp;noeud&nbsp;"element"&nbsp;du&nbsp;bloc&nbsp;retourné</span></div><div style="height:16px"><span style="color:#008e00">#&nbsp;et&nbsp;pointe&nbsp;sur&nbsp;le&nbsp;troisième&nbsp;noeud&nbsp;"data"&nbsp;fils&nbsp;du&nbsp;noeud&nbsp;"element"</span></div><div style="height:16px"><span style="color:#008e00">#&nbsp;en&nbsp;l'identifiant&nbsp;par&nbsp;la&nbsp;valeur&nbsp;"string"&nbsp;de&nbsp;son&nbsp;attribut&nbsp;"type"</span></div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">my</span>&nbsp;<span>$form_xpath</span><span style="color:#c800a4">=</span><span style="color:#df0002">""</span>;</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span>$form_xpath</span><span style="color:#c800a4">=</span><span style="color:#df0002">"./data[\@type=\"string\"]"</span>;<span style="color:#008e00">#.&nbsp;est&nbsp;l'endroit&nbsp;de&nbsp;xml</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;</div><div style="height:16px"><span style="color:#008e00">#&nbsp;Initialisation&nbsp;du&nbsp;compteur&nbsp;pour&nbsp;la&nbsp;boucle&nbsp;d'éxtraction&nbsp;des&nbsp;formes&nbsp;</span></div><div style="height:16px"><span style="color:#008e00">#&nbsp;correspondants&nbsp;aux&nbsp;éléments&nbsp;suivants&nbsp;du&nbsp;motif</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">my</span>&nbsp;<span>$following</span><span style="color:#c800a4">=</span><span style="color:#3a00dc">0</span>;</div><div style="height:16px"></div><div style="height:16px"><span style="color:#008e00">#&nbsp;Recherche&nbsp;du&nbsp;noeud&nbsp;data&nbsp;contenant&nbsp;la&nbsp;forme&nbsp;correspondant&nbsp;au&nbsp;premier&nbsp;&nbsp;&nbsp;</span></div><div style="height:16px"><span style="color:#008e00">#&nbsp;élément&nbsp;du&nbsp;motif&nbsp;au&nbsp;moyen&nbsp;de&nbsp;la&nbsp;fonction&nbsp;"find"&nbsp;qui&nbsp;prend&nbsp;pour&nbsp;arguments:</span></div><div style="height:16px"><span style="color:#008e00">#&nbsp;&nbsp;&nbsp;1.&nbsp;le&nbsp;chemin&nbsp;XPath&nbsp;relatif&nbsp;du&nbsp;noeud&nbsp;"data"</span></div><div style="height:16px"><span style="color:#008e00">#&nbsp;&nbsp;&nbsp;2.&nbsp;le&nbsp;noeud&nbsp;en&nbsp;cours&nbsp;de&nbsp;traitement&nbsp;dans&nbsp;cette&nbsp;boucle&nbsp;foreach</span></div><div style="height:16px"><span style="color:#008e00">#&nbsp;la&nbsp;fonction&nbsp;"find"&nbsp;retourne&nbsp;par&nbsp;défaut&nbsp;une&nbsp;liste&nbsp;de&nbsp;noeuds,&nbsp;dans&nbsp;notre&nbsp;</span></div><div style="height:16px"><span style="color:#008e00">#&nbsp;cas&nbsp;cette&nbsp;liste&nbsp;ne&nbsp;contient&nbsp;qu'un&nbsp;seul&nbsp;élément&nbsp;que&nbsp;nous&nbsp;récupérons&nbsp;avec&nbsp;</span></div><div style="height:16px"><span style="color:#008e00">#&nbsp;la&nbsp;fonction&nbsp;"get_node"&nbsp;enfin&nbsp;nous&nbsp;en&nbsp;imprimons&nbsp;le&nbsp;contenu&nbsp;textuel&nbsp;au&nbsp;</span></div><div style="height:16px"><span style="color:#008e00">#moyen&nbsp;de&nbsp;la&nbsp;méthode&nbsp;string_value</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#450084">print</span>&nbsp;<span>MATCHFILE</span>&nbsp;<span>$xpc</span><span style="color:#c800a4">-&gt;</span><span>findvalue</span>(<span>$form_xpath</span><span style="color:#c800a4">,</span><span>$noeud</span>);</div><div style="height:16px"><span style="color:#008e00">#je&nbsp;suis&nbsp;&#710;&nbsp;element,&nbsp;$noeud&nbsp;pointe&nbsp;&#710;&nbsp;element,&nbsp;dans&nbsp;ce&nbsp;context&nbsp;l&#710;,&nbsp;</span></div><div style="height:16px"><span style="color:#008e00">#findvalue&nbsp;travers&nbsp;le&nbsp;chemin&nbsp;$form_xpath&nbsp;cherche&nbsp;$noeud,&nbsp;</span></div><div style="height:16px"><span style="color:#008e00">#dans&nbsp;$noeud&nbsp;je&nbsp;fais&nbsp;une&nbsp;requete&nbsp;xpath</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;</div><div style="height:16px"><span style="color:#008e00">#&nbsp;Boucle&nbsp;d'éxtraction&nbsp;des&nbsp;formes&nbsp;correspondants&nbsp;aux&nbsp;éléments&nbsp;</span></div><div style="height:16px"><span style="color:#008e00">#suivants&nbsp;du&nbsp;motif&nbsp;On&nbsp;descend&nbsp;dans&nbsp;chaque&nbsp;noeud&nbsp;element&nbsp;du&nbsp;bloc</span></div><div style="height:16px"><span style="color:#c800a4">while</span>&nbsp;(&nbsp;<span>$following</span>&nbsp;<span style="color:#c800a4">&lt;</span>&nbsp;$<span style="color:#008e00">#tokens)&nbsp;{</span></div><div style="height:16px"><span style="color:#008e00">#Incrémentation&nbsp;du&nbsp;compteur&nbsp;$following&nbsp;de&nbsp;cette&nbsp;boucle&nbsp;d'éxtraction&nbsp;</span></div><div style="height:16px"><span style="color:#008e00">#des&nbsp;formes</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span>$following</span><span style="color:#c800a4">++</span>;</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;</div><div style="height:16px"><span style="color:#008e00">#&nbsp;Construction&nbsp;du&nbsp;chemin&nbsp;XPath&nbsp;relatif&nbsp;du&nbsp;noeud&nbsp;"data"&nbsp;contenant</span></div><div style="height:16px"><span style="color:#008e00">#&nbsp;la&nbsp;forme&nbsp;correspondant&nbsp;à&nbsp;l'élément&nbsp;suivant&nbsp;du&nbsp;motif</span></div><div style="height:16px"><span style="color:#008e00">#&nbsp;Notez&nbsp;bien&nbsp;l'utilisation&nbsp;du&nbsp;compteur&nbsp;$folowing&nbsp;tant&nbsp;dans&nbsp;la&nbsp;condition&nbsp;de&nbsp;la&nbsp;</span></div><div style="height:16px"><span style="color:#008e00">#&nbsp;boucle&nbsp;ci-dessusque&nbsp;dans&nbsp;la&nbsp;construction&nbsp;du&nbsp;chemin&nbsp;relatif&nbsp;XPath</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#c800a4">my</span>&nbsp;<span>$following_elmt</span><span style="color:#c800a4">=</span><span style="color:#df0002">"following-sibling::element["</span><span style="color:#c800a4">.</span><span>$following</span><span style="color:#c800a4">.</span><span style="color:#df0002">"]"</span>;</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008e00">#chemin&nbsp;xpath&nbsp;chercher&nbsp;frere&nbsp;de&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span>$form_xpath</span><span style="color:#c800a4">=</span><span>$following_elmt</span><span style="color:#c800a4">.</span><span style="color:#df0002">"/data[\@type=\"string\"]"</span>;&nbsp;</div><div style="height:16px"><span style="color:#008e00">#il&nbsp;y&nbsp;a&nbsp;2&nbsp;boucles,&nbsp;1&nbsp;on&nbsp;trouve&nbsp;NOM&nbsp;ex:p<span style="color:#bfbfbf">·</span>re&nbsp;puis&nbsp;dans&nbsp;2e&nbsp;boucle,&nbsp;on&nbsp;traite&nbsp;</span></div><div style="height:16px"><span style="color:#008e00">#puis&nbsp;NOM:&nbsp;Pi<span style="color:#bfbfbf">·</span>re&nbsp;Impression&nbsp;du&nbsp;contenu&nbsp;textuel&nbsp;du&nbsp;noeud&nbsp;data&nbsp;contenant&nbsp;la&nbsp;</span></div><div style="height:16px"><span style="color:#008e00">#PEP:&nbsp;de,&nbsp;forme&nbsp;correspondant&nbsp;à&nbsp;l'élément&nbsp;suivant&nbsp;du&nbsp;motif</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#450084">print</span>&nbsp;<span>MATCHFILE</span>&nbsp;<span style="color:#df0002">"&nbsp;"</span><span style="color:#c800a4">,</span><span>$xpc</span><span style="color:#c800a4">-&gt;</span><span>findvalue</span>(<span>$form_xpath</span><span style="color:#c800a4">,</span><span>$noeud</span>);</div><div style="height:16px"><span style="color:#008e00">#&nbsp;Incrémentation&nbsp;du&nbsp;compteur&nbsp;$following&nbsp;de&nbsp;cette&nbsp;boucle&nbsp;d'éxtraction&nbsp;</span></div><div style="height:16px"><span style="color:#008e00">#&nbsp;des&nbsp;formes&nbsp;$following++;</span></div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height:16px"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#450084">print</span>&nbsp;<span>MATCHFILE</span>&nbsp;<span style="color:#df0002">"\n"</span>;<span style="color:#008e00">#&nbsp;on&nbsp;fait&nbsp;retour&nbsp;&#710;&nbsp;ligne</span></div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#008e00">#&nbsp;Fermeture&nbsp;du&nbsp;fichiers&nbsp;de&nbsp;motifs</span></div><div style="height:16px">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#450084">close</span>(<span>MATCHFILE</span>);</div><div style="height:16px">}<span>&nbsp;</span></div></div>
<br>
	
<div class="lien_centre"><a href="#top_of_page">[ TOP ]</a></div><br>
	<!--FEUILLE DE STYLES-->
<h2>XSL</h2>
	<a id="Feuille_de_styles"></a>
<p>Comme dans la BAO 1, BAO 2, on peut visualiser les sorties au format XML, avec une feuille de styles XSLT pour le transformer. Les balises <element> sont celles qui contiennent les tags, on peut définir comme chemins:</p>	
<p>NOM ADJ: //element[contains(data[1], ‘NOM')][following-sibling::element[1] [contains(data[1], ‘ADJ')]]</p>	
<p>NOM PREP NOM: //element[contains(data[1], 'NOM')][following-sibling::element[1][contains(data[1], 'PRP')]][following-sibling::element[2][contains(data[1], ‘NOM')]]</p>	
<p>Une partie de code, les "chemins" sont dans les balises:</p>
<br>
<img src="../Images/bao3xsl.jpg" id="arborescence_corpus" alt="Arborescence">
<br>	
<p>Un exemple d'extraction de patrons da la rubrique EUROPE: </p>
<br>
<a href="../Sorties/BAO3_xml/europe.xml"><div class="tableau">
<img src="../Images/europe2.jpeg" id="arborescence_corpus" alt="Arborescence">
<br>
<a href="../Sorties/BAO3_xml/europe.xml" class="lien_centre">[ Visualiser ]</a>
	
<p></p>	
<p></p>	
<p></p>	
<p></p>			
	
	

<!-- ********************* DOWNLOAD ***************************** -->
    <br>

    <div class="telechargement">
        <a id="download">
                
        </a>
        <div class="lien_centre"><a href="#top_of_page">[ TOP ]</a></div>

            <p>Téléchargement </p>

            <ul>
	            <li><a href="../Scripts/bao3_JMD.pl" target="_blank">Méthode Perl de JMD</a></li>
                <li><a href="../Scripts/bao3_SF.pl" target="_blank">Méthode Perl de SF</a></li>
                <li><a href="../Scripts/bao3_SF2.pl" target="_blank">Perl de SF (avec modification)</a></li>
                <li><a href="../Scripts/bao3_auto.pl" target="_blank">Méthode Perl d’automation</a></li>
                <li><a href="../Scripts/bao3_RB.pl" target="_blank">Méthode XPATH de RB</a></li>
                
                
                <li><a href="../Sorties/BAO3/TECHNOLOGIES11-N_Adj.txt" target="_blank">Exemple de sortie patron TECHNOLOGIES_N_Adj.txt</a></li>
                <li><a href="../Sorties/BAO3/VOYAGE_tagged.xml" target="_blank">Exemple de sortie patron VOYAGE.xml</a></li>
                <li><a href="../Scripts/BAO3_xml/style_bao3.xsl" target="_blank">BAO 3 XSL</a></li>

            </ul>
    </div>

<div class="rightfooter">Crée par Chang TAN et Si WU, Plurital 2015</div>	
</div>
</body>
</html>

